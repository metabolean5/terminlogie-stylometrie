prenom.nom@unicaen.fr, prenom.nom@pertimm.com, prenom.nom@ensicaen.fr Cet article aborde une question centrale de l'alignement automatique, celle du diagnostic de parallélisme des documents à aligner. Les recherches en la matière se sont jusqu'alors concentrées sur l'analyse de documents parallèles par nature : corpus de textes réglementaires, documents techniques ou phrases isolées. Les phénomènes d'inversions et de suppressions/ajouts pouvant exister entre les différentes versions d'un document sont ainsi souvent ignorées. Nous proposons donc une méthode pour diagnostiquer en contexte des zones parallèles à l'intérieur des documents. Cette méthode permet la détection d'inversions ou de suppressions entre les documents à aligner. Elle repose sur l'affranchissement de la notion de mot et de phrase, ainsi que sur la prise en compte de la Mise en Forme Matérielle du texte (MFM). Sa mise en oeuvre est basée sur des similitudes de répartition de chaînes de caractères répétées dans les différents documents. Ces répartitions sont représentées sous forme de matrices et l'identification des zones parallèles est effectuée à l'aide de méthodes de traitement d'image. Parallel areas detection in multi-documents for multilingual alignment  This article broaches a central issue of the automatic alignment : diagnosing the parallelism of  documents. Previous research was concentrated on the analysis of documents which are parallel by nature such as corpus of regulations, technical documents or simple sentences. Inversions and deletions/additions phenomena that may exist between different versions of a document has often been overlooked. To the contrary, we propose a method to diagnose in context the parallel areas allowing the detection of deletions or inversions between documents to align. This original method is based on the freeing from word and sentence as well as the consideration of the text formatting. The implementation is based on the detection of repeated character strings and the identification of parallel segments by image processing. détection et alignement de zones, appariement de N-grammes de caractères, corpus de multidocuments. area detection and alignment, character N-grams matching, multidocuments corpora.  Notre travail se situe dans le domaine de l'alignement, c'est-à-dire de la mise en correspondance  d'éléments textuels sémantiquement équivalents entre des documents en relation de traduction. Nous appelons cet ensemble de documents un multidocument et chacun des documents qui le composent des volets . L'opération traduisante réalisée par le traducteur humain vise à interpréter le sens d'un document donné dans la langue source et à produire un document sémantiquement équivalent dans une ou plusieurs langues cibles. Cette opération peut donner lieu à des modifications dans l'organisation interne des différents volets d'un multidocument. Dans l'état de l'art, cette question a été principalement traitée au niveau microscopique : ordre des mots dans la phrase, permutation ou suppression de phrases. Dans cet article, nous nous intéressons au contraire aux différences au niveau macroscopique. Nous étudions plus particulièrement les phénomènes d'inversion et de suppression/ajout qui rendent asynchrones certains documents traduits. Ces documents ne sont pas alignables par des techniques classiques. La figure 1 présente deux cas de traductions dans le même multidocument .                                                                                     F  1 - Inversion et maintien de l'ordre entre les différents volets d'un multidocument  À gauche, la figure 1 présente un bi-document asynchrone avec inversion massive de plusieurs  zones de textes entre les volets français et anglais (et par conséquent allemand) du même multidocument. À droite, l'alignement entre les volets allemand et anglais témoigne d'une traduction synchrone, tout est là et dans le même ordre. Dans le premier cas, nous considérons qu'il existe deux zones parallèles, correspondant dans chaque langue au volet dans son ensemble. Dans le second cas, le contenu sémantique est le même, mais l'ordre des différentes zones de texte n'est pas conservé, la traduction est asynchrone Nous considérons alors qu'il existe plusieurs zones entre lesquelles on recherche le parallélisme. Dans la figure 1, les paragraphes sont triés par ordre alphabétique ce qui provoque des différences d'ordre selon les langues. Des cas de suppression de zones de textes entre deux volets peuvent également être observés. Ces phénomènes d'inversion et de suppression constituent les principaux obstacles aux méthodes d'alignement qui reposent sur une hypothèse de parallélisme. Notre méthode s'attaque au problème de la détection en contexte du parallélisme, suivant la hiérarchie de grain : document  zone  segment  N-grammes de caractères . Notre objectif est de rechercher et d'aligner les zones qui maximisent le parallélisme à l'intérieur de chaque bi-document : les multizones. Pour ce faire, nous proposons des outils de diagnostic de parallélisme afin de déterminer si un bi-document est synchrone, asynchrone avec suppression ou inversion. Notre méthode comprend quatre étapes :  Appariement : recherche des correspondances multilingues de N-grammes de caractères à partir  d'une collection de multidocuments. Calcul de similarité : comparaison des segments de textes de niveaux supérieurs et représentation sous forme de matrices de points (dotplots). Analyse : détection des zones similaires entre deux volets, les bizones. Diagnostic : qualification de la nature du parallélisme entre deux documents.  Plusieurs courants existent dans le domaine de l'alignement. Ils se distinguent notamment par le  grain qu'ils proposent d'aligner : mots, phrases, paragraphes ou sections. Nous consacrons donc la section 2 à un rappel des principales méthodes d'alignement proposées à ce jour, avant de présenter le positionnement de nos travaux dans la section 3. Dans la section 4, nous décrivons les quatre étapes de notre méthode. Enfin, dans la section 5, nous présentons nos résultats en matière de diagnostic de parallélisme et d'alignement automatique de zones à partir de ces matrices. Les méthodes d'alignement sous-phrastique appliquées à des phrases alignées, si diverses soientelles, trouvent toutes leur limite dans le fait qu'elles présupposent la disponibilité de corpus préalablement alignés en phrases (H , B . . .). De tels corpus sont cependant peu nombreux et couvrent peu de langues. Des corpus où le grain aligné est plus gros (souvent le document) sont en revanche disponibles pour un très grand nombre de langues. Ils laissent réellement envisager la pratique d'opérations de rétro-ingénierie massives et peu supervisées sur ces documents issus du travail du traducteur humain. Ces pratiques permettent d'extraire des informations linguistiques et des ressources lexicales pouvant être utiles tant aux traducteurs, qu'aux lexicographes, aux linguistes ou aux terminologues.  Plusieurs méthodes d'alignement sous-phrastique à partir de documents non préalablement  alignés en phrases ont été proposées (Simard et al., 1993; Church, 1993; Dagan et al., 1993). Les auteurs établissent un lien entre la similitude de graphie et la similitude de sens (cognats). Ces cognats servent de point d'ancrage pour un alignement de texte. Néanmoins, si ces similitudes sont fréquentes au sein d'une même famille de langues, elles s'avèrent plus rares entre les langues de familles différentes. Le problème existe également pour des langues ne partageant pas le même système d'écriture. En outre, ces méthodes reposent sur l'hypothèse centrale de parallélisme (Melamed, 1997; Simard & Plamondon, 1996). Or, cette hypothèse réduit considérablement le champ d'application des méthodes d'alignement sous-phrastique. À travers le système K-vec, Fung & Church (1994) ont proposé une méthode d'alignement de documents basée sur une similarité de répartition de mots. L'idée de K-vec est de découper chacun des deux volets en portions égales (K-segments) et d'affecter à chaque mot de chaque texte, un vecteur avec K dimensions (K-vec). K-vec fait l'hypothèse que si deux mots sont traductions l'un de l'autre, ils apparaissent dans les mêmes segments que deux mots qui ne le sont pas. K-vec semble être le premier système sans présupposé sur la présence de cognats ou les limites de phrases. Cependant, les systèmes reposant sur la similitude de répartition de mots se heurtent à la nature flexionnelle de certaines langues, un même mot pouvant alors recouvrir plusieurs formes selon sa fonction dans la phrase. En outre, K-vec suppose la linéarité de la traduction entre les volets, ce qui n'est pas toujours le cas, notamment sur les paires de textes en langues asiatiques ou en langues de la famille indo-européenne traitées par les auteurs. Enfin, des phénomènes d'ajouts/suppressions peuvent également interférer. Pour de meilleurs résultats, Fung & Mckeown (1994) ont implémenté Dynamique de K-vec (DK-vec) qui produit un petit dictionnaire dont les entrées sont utilisées comme des ancres pour l'alignement. (Bourdaillet & Ganascia, 2007) abordent la question de l'alignement monolingue de textes comprenant des déplacements. Plus précisément l'étude porte sur les différentes versions laissées par un écrivain d'une de ses oeuvres, c'est-à-dire les brouillons successifs. Aligner en monolingue ces réécritures revient à calculer une distance d'édition avec déplacements. En effet, les trois opérateurs de la distance de Levenshtein (insertions, suppressions et remplacements) ne suffisent alors pas à décrire les phénomènes potentiellement observables. Ces travaux constituent une amorce de recherche sur la question d'une méthode d'alignement prenant en charge les déplacements de portions de texte entre deux volets d'un bi-document. Cependant, la tâche se trouve grandement simplifiée par son contexte monolingue. L'hypothèse qu'une même graphie recouvre le même sens dans les deux versions est directement exploitable et la multiplication des hapax simplifie la tâche.  Enfin, plusieurs de ces auteurs ont proposé de reporter sur des matrices de points (dotplots)  les appariements ainsi révélés (Church & Helfman, 1993). Le problème de l'alignement est ainsi transformé en un problème de traitement d'image (Chang & Chen, 1997). Notons que des hypothèses similaires ont été exploitées pour la détection de plagiat (Brixtel et al., 2010).  Les travaux que nous présentons se situent dans la lignée des travaux d'alignement de documents  précédemment cités. Nous utilisons également des dotplots pour diagnostiquer si la traduction est globalement littérale entre deux volets. Nos travaux se distinguent néanmoins par la granularité choisie pour amorcer le traitement des documents. Comme Cromières (2006) et Mcnamee & Mayfield (2004), nous nous intéressons aux N-grammes de caractères répétés, mieux à même de révéler des similitudes à la fois monolingues et multilingues (Lecluze, 2011). Nous étendons cependant la portée de la méthode en l'appliquant aussi bien au contenu textuel qu'à la Mise en Forme Matérielle (MFM) (Brixtel, 2011).  Le corpus que nous utilisons est constitué de communiqués de presse de l'Union Européenne  au format HTML. Nous présentons des résultats sur 6 couples de langues : français-espagnol (fr,es), français-grec (fr,el), français-finnois (fr,fi), français-anglais (fr,en), français-allemand (fr,de) et français-danois (fr,da). Ces couples représentent un échantillon de familles de langues proches et éloignées. Nous supposons en effet que plus les langues sont génétiquement éloignées, plus il sera difficile de les rapprocher d'un point de vue strictement lexical. Nous introduisons également le grec pour attester que notre méthode est robuste à l'absence de similitudes de graphie.  Notre travail se situe dans la lignée de ceux de Cromières (2006), nous procédons à une recherche  de N-grammes de caractères répétés en contexte, des populations. Les populations sont déduites d'un tableau de suffixes. Elles sont obtenues en calculant des motifs sans trou tels que décrits par (Ukkonen, 2009) . Ces chaînes possèdent les caractéristiques suivantes :  répétées : les chaînes ont un effectif de 2 ou plus ;  maximales : les chaînes ne peuvent être étendues à gauche ou à droite sans perdre une occurrence. L'intérêt de ces chaînes est double : révéler des facteurs communs monolingues au delà des mots graphiques et mettre en évidence des correspondances multilingues.  T  1 - Liste des mots graphiques signifiant « transport » dans un échantillon de textes en français, espagnol et grec ainsi que leurs effectifs entre parenthèses.  Ici, comme en témoigne le tableau 1, les écarts d'effectifs entre des mots alignés dans un  échantillon sont déjà considérables. Or si l'on s'intéresse désormais aux répétitions de chaînes de caractères, il existe dans chaque langue une sous-chaîne commune à l'ensemble des équivalents sémantiques de « transport ».  T  2 - Chaînes de caractères répétées maximales communes aux mots signifiant « transport » dans le même échantillon de textes (fr, es et el) et leur effectif respectif.  Notre méthode consiste à obtenir de façon endogène et indépendante des langues une série de  points d'ancrage entre deux volets : des appariements. Un appariement est une correspondance sémantique fortement généralisée telle qu'on en trouve par exemple dans un dictionnaire. Par extension, l'appariement en tant que méthode est la mise en correspondance de chaînes de caractères répétées entre des multidocuments : des populations. Nous utilisons la similitude de répartition de ces chaînes (effectifs et positions dans la collection).  Ainsi, nous calculons les appariements entre chaînes de caractères de langues différentes, en  prenant en compte des similitudes de répartitions sur l'ensemble des bi-documents de la collection. Les collections que nous constituons sont composées de 40 multidocuments chacune. Un exemple de répartition pour deux N-grammes de caractères est donné sur le tableau 3.  T  3 - Exemple de répartitions de deux N-grammes de caractères grec et français. Les espaces blancs sont représentés par le caractère « _ ».  Afin de limiter l'explosion combinatoire induite par une comparaison exhaustive de toutes les  chaînes répétées maximales, nous comparons simplement les chaînes d'effectifs proches. Nous utilisons une distance L1 normalisée. Cela consiste à faire pour deux N-grammes de caractères (s et s ) de deux langues différentes, le rapport entre la somme des différences d'effectifs par document et la somme des effectifs des deux N-grammes dans la collection de bi-documents dans ces langues soit :  distance(s  ,s ) = _ _  Ce calcul de distance permet de produire des appariements de populations de N-grammes de  caractères avec une distance située dans [0,1]. Une distance de 0 signifie que deux N-grammes ont des répartitions identiques dans le corpus. C'est à partir des distances entre N-grammes que nous calculons des similarités entre les segments les contenant. Cette distance permet de calculer des correspondances fortement généralisées dans une collection de multidocuments ou multizones. Elle rend le traitement insensible aux différences d'ordres entre les volets et aux suppressions locales de zones de textes. Nous donnons quelques exemples d'appariements ainsi calculés dans la figure 2.  Les appariements obtenus lors de la première étape du processus servent à calculer la similarité  entre des paires de segments d'une taille arbitraire fixée à 1% de la taille des volets d'origine. Dans notre hiérarchie de grain, ces segments correspondent au grain inférieur aux zones que nous cherchons à construire.  Tout d'abord, nous introduisons quelques définitions sur les segments que nous traitons. Soit   un alphabet. Un document est un élément de  . Un segment est une sous-partie d'un document que nous exprimons relativement à la taille du document. Ainsi, le segment (d,(3,4),(0,1)) est l'ensemble des caractères débutant à la position 3,4 et de longueur 0,1. Ces positions sont exprimées en pourcentage par rapport à la taille |d| du document. La segmentation obtenue pour un document d est notée S = (s ,...,s ). Nous segmentons nos documents en 200 segments correspondant à 1% de texte. Ces segments se chevauchent donc, et pour la même segmentation F 2 - Appariements de populations de chaînes de caractères répétées dans la collection. Chaque groupe de 3 lignes présente : ligne 1, la distance qui a été calculée entre deux chaînes de caractères sur la collection, lignes 2 et 3, respectivement pour la chaîne 1 et la chaîne 2 : la langue, la 'chaîne', son (effectif dans la collection) et la liste des identifiants de multidocument dans lesquels elle apparaît.  appliquée sur deux documents d  et d d'un bi-document, S = (s ,...,s ) et S = (s ,...,s ) nous obtenons une matrice de similarité  de taille n× n. C'est en fonction de la répartition des segments similaires sur toute la matrice  que nous jugeons du parallélisme entre deux documents d et d . Pour ce faire, nous définissons la similarité entre deux segments i  S et j  S via la fonction suivante :  = _ _ nb_liens(i, j) représente le nombre d'appariements ayant une distance inférieure à 0,1 mettant en jeu des N-grammes de caractères inclus dans les segments i et j. max_liens(i) représente le nombre de liens maximum entre le segment i et tous les segments de S (Tableau 4).  T  4 - Illustration de max_liens(i), max_liens vaut ici 14, le maximum sur la ligne  Dans la mesure où nous ne supposons pas de parallélisme initial, nous considérons l'ensemble  des liens possibles entre les occurrences des N-grammes appariés sans nous focaliser sur un espace de recherche précis.  Les figures 3, 4 et 5 donnent des exemples de matrices   représentées en image en niveau de gris. Une similarité maximale est représentée par un pixel noir. Plus un pixel est clair, plus les segments associés sont différents selon notre fonction de similarité. Ainsi, quand deux documents sont traduits de façon globalement littérale, une diagonale se dessine de l'angle supérieur gauche à l'angle inférieur droit de la matrice (figure 3). Une diagonale cassée signifie l'existence d'inversions dans l'ordre de la traduction (figure 4).  F  3 - Cas de volets synchrones (communiqué de presse IP/05/1156). L'ordre de traduction est globalement conservé, on observe une diagonale au centre de la matrice.  F  4 - Cas de volets avec inversion (communiqué IP/05/1157). L'ordre de la traduction est massivement inversé. La diagonale est « éclatée » en plusieurs segments de droites. (Pas de matrice da-fr, puisque le bi-document da-fr est synchrone).  F  5 - Volets avec suppression (communiqués de presse IP/05/473 et IP/05/1558). On observe plusieurs segments de droites à l'intérieur de la matrice ayant des angles différents de celui de la première diagonale. es-fr en-fr de-fr  el-fr  fi-fr  F  6 - Détection de segments de droites sur des cas de volets avec inversion. Il n'y a pas de matrice da-fr puisque le bi-document da-fr est synchrone.  Nous pouvons constater que pour un même jeu de paramètres pour tous les couples de langues,  les résultats se dégradent à mesure de l'éloignement génétique des langues. La visibilité des droites et des segments de droite dans les figures 3 et 4 se dégrade entre la ligne 1 et la ligne 2. Le couple français-grec montre que la méthode s'accommode de différences morphologiques (pas de nécessité d'avoir des cognats). Les résultats sur ce couple sont proches de ceux du couple françaisespagnol. En revanche, les résultats sur le couple français-finnois sont moins nets. L'analyse au niveau des caractères n'a pas permis de pallier totalement les différences sur le concept de mot entre ces deux langues. La différence de richesse lexicale entre ces langues joue pour beaucoup dans nos résultats. Le finnois fait un faible usage de la synonymie, comparativement au français par exemple, ce qui donne lieu à des différences de distributions conséquentes entre des unités pourtant sémantiquement équivalents. Celles-ci sont difficiles à appréhender au grain document et à calculer à partir d'une collection. Cette hypothèse devra être vérifiée en comparant des langues plus proches ou de façon plus générale en comparant davantage de couples. Ainsi, les différents phénomènes linguistiques interférant dans les résultats pourront être apprécier plus finement. La recherche des bons paramètres pour chaque couple de langue pourra mettre en évidence des similarités/dissimilarités entre famille de langue. À partir de ces résultats, nous nous focalisons sur l'analyse de l'image complète représentant ces matrices afin de détecter si deux documents sont parallèles ou s'ils contiennent d'éventuelles inversions ou suppressions de zones de textes.  L'objectif de cette étape est double : mettre graphiquement en évidence les segments de droites et  récupérer les informations propres à ces segments (positions, longueurs. . .). Nous calculons ces segments au moyen de la transformée de Hough. Ces informations seront utilisées pour l'étape de diagnostic suivante. Nous présentons dans les figures 6 et 7 des exemples de détection sur les cas de bi-documents asynchrones précédemment exposés. en-fr es-fr  F  7 - Détection de segments de droites sur des cas de volets avec suppression. Les informations recueillies grâce au traitement d'image sont utilisées pour établir automatiquement un diagnostic de parallélisme. Nous définissons quatre diagnostics :  volets synchrones : pas d'inversion, ni de suppression de détectée (figure 3).   matrices indéfinies :  <0,2 où l t est la longueur totale des segments de droite et ld la longueur de la diagonale.  volets asynchrones avec inversion : les coordonnées des segments (en rouge) dans une des  deux dimensions ne se suivent pas (figures 4 et 6).  volets asynchrones avec suppression : la différence de longueur des projections sur les axes  (en bleu) est supérieure à 2,5% (figures 5 et 7).  Les informations recueillies grâce au traitement d'image sont également utilisées pour permettre  le retour aux textes. Nous présentons ici deux exemples : le premier correspond à la matrice en-fr de la figure 7, le second à la matrice en-fr de la figure 6, ainsi qu'à la figure 1.  Alignement de zones sur un bi-document asynchrone avec suppression. Le tableau 5 illustre  un cas de suppression dans un des deux volets, le volet en français, correspondant à environ un tiers de la taille du volet en anglais (2120 caractères). Si la suppression a bien été diagnostiquée, l'alignement de zones n'est lui que partiellement correct. La multizone 2 correspond exactement à l'attendu. Le coeur des multizones 1 et 3 sont corrects mais les contours restent mal définis.  Alignement de zones sur un bi-document asynchrone avec inversion. Le tableau 6 illustre  un cas de différences d'ordre entre les zones de textes de deux volets. L'ordre des présentations des projets listés par pays respecte l'ordre alphabétique des noms des pays concernés. Tous les segments de droites de la matrice ont été mis en évidence, l'alignement de zones découlant des segments est globalement correct.  T  5 - Alignement de zones entre les volets fr et en du communiqué IP/05/473 avec suppression détectée à l'aide de notre méthode. Le corpus que nous utilisons est constitué de 213 multidocuments. Pour chacun de ces multidocuments nous étudions 6 couples de langues (fr,es), (fr,el), (fr,fi), (fr,en), (fr,de) et (da,de). Évaluer le diagnostic des bi-documents (indéfini, synchrone, asynchrone avec inversion ou asynchrone avec suppression) n'est pas une tâche triviale, en effet il n'existe pas de références pour évaluer la détection de multizones. Nous présentons les résultats obtenus à partir d'une référence établie pour trois collections « tout venant » d'une part et trois collections thématiques d'autre part constituées à partir de notre corpus (Tableau 7). Les expériences réalisées sur ce premier corpus ont confirmé que :  - l'utilisation de la MFM améliore le taux de décision de +15% (+10% sur les couples de langues  proches et +20% sur les couples de langues éloignées) ; - les similitudes de répartition de chaînes de caractères répétées permettent d'aligner des documents, y compris dans des langues éloignées avec un taux de décision toutefois plus faible sur les langues éloignées : -11% ; - exploiter une collection de multidocuments thématiquement proches contribue faiblement à l'amélioration : +3% de précision sur les documents synchrones.  À titre comparatif, on peut préciser que nos résultats sont de 2 à 7% meilleurs qu'une baseline  prenant comme hypothèse que tous les documents parallèles sont synchrones. Ainsi, le système s'avère très précis et assez pertinent pour les documents synchrones. Nos résultats sur les documents asynchrones (10% du corpus) sont moins satisfaisants.  T  6 - Alignement de zones entre les volets fr et en du communiqué IP/05/1157 présentant une différence d'ordre des zones détectées à l'aide de notre méthode.  T  7 - Description des 1491 documents du corpus (nombre de caractères, de mots et de paragraphes moyen ± écart-type)  Afin de proposer une autre évaluation, nous avons fabriqué deux jeux de test, chacun contenant  240 bi-documents dans les 6 couples de notre corpus. Après modifications, le premier jeu contient 60 bi-documents asynchrones avec inversion et le second 60 bi-documents asynchrones avec suppression.  Sur le premier jeu, nous avons obtenu un rappel de 25,4% et une précision de 41,6% (F   mesure = 31,6). Sur le second, les résultats étaient meilleurs puisque nous avons obtenu un rappel de 57,1% avec une précision de 43,4% (F  mesure = 49,3).  Les travaux que nous avons présentés dans cet article témoignent de la possibilité d'établir un  alignement brut de documents traduits, grâce à un appariement de N-grammes de caractères répétés dans une collection de multidocuments. Ces unités sont révélées sans utilisation de ressources externes et de façon indépendante des langues en présence. Cela permet d'amorcer sans présupposé de parallélisme un alignement lexical de mots. L'étape de détection automatique des zones parallèles qui revient à un problème de traitement d'image s'avère au même titre que l'alignement plus difficile à mesure que les langues mises en confrontation s'éloignent. Ces travaux témoignent d'une part que l'alignement de corpus parallèles n'est pas un sujet clos et d'autre part que la combinaison d'indices utilisée permet bien de les exploiter sans présupposé de parallélisme. Ces travaux recèlent des perspectives tant opératoires que de recherche. Des perspectives opératoires en ce qui concerne l'établissement automatique des paramètres de création des matrices et de diagnostic des bi-documents, ainsi qu'au niveau de la détection des segments de droites des images qu'il faut affiner. En terme de recherche, ces travaux offrent des perspectives pour le contrôle a posteriori de traduction mais également pour le traitement de corpus comparables.  Merci aux relecteurs, particulièrement pour la suggestion de fabriquer un nouveau jeu de  données.  
